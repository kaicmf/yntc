<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Think AI | 专业的AI提示词优化工具 - 让AI更懂你</title>
    <meta name="description" content="免费的AI提示词(Prompt)增强工具。输入你的想法，一键生成结构化、高质量的Midjourney、ChatGPT、DeepSeek指令，提升AI输出质量。">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0A0A0A; color: #EDEDED; font-family: sans-serif; }
        .glass-panel { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .gradient-text { background: linear-gradient(to right, #a855f7, #3b82f6); -webkit-background-clip: text; color: transparent; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 md:p-8">

    <main class="w-full max-w-3xl space-y-8 mt-10">
        <div class="text-center space-y-4">
            <h1 class="text-5xl md:text-6xl font-black tracking-tighter">
                <span class="gradient-text">To Think AI</span>
            </h1>
            <p class="text-lg text-gray-400">
                别让糟糕的指令毁了你的 AI。<br>输入你的想法，让它瞬间变专业。
            </p>
        </div>

        <div class="glass-panel rounded-3xl p-6 md:p-8 shadow-2xl space-y-6">
            <div>
                <label for="userInput" class="block text-sm font-medium text-gray-400 mb-2 ml-1">你的原始想法 (越具体越好)</label>
                <textarea id="userInput" rows="5" 
                    class="w-full bg-black/30 border border-gray-800 rounded-2xl p-4 focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition resize-none placeholder-gray-600" 
                    placeholder="例如：帮我写个小红书文案，卖减肥咖啡的，要吸引年轻女生，语气活泼点，带点表情符号..."></textarea>
            </div>

            <button id="submitBtn" onclick="startEvolve()" 
                class="w-full py-4 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 rounded-2xl font-bold text-xl transition transform active:scale-95">
                ✨ 一键进化提示词
            </button>

            <div id="resultArea" class="hidden space-y-3 pt-4 border-t border-gray-800">
                <div class="flex justify-between items-center ml-1">
                    <label class="block text-sm font-medium text-gray-400">优化后的专业指令</label>
                    <button onclick="copyText()" class="text-sm text-purple-400 hover:text-purple-300 transition flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" /></svg>
                        一键复制
                    </button>
                </div>
                <div id="outputContent" class="w-full bg-gray-900/50 border border-gray-800 rounded-2xl p-5 text-gray-200 whitespace-pre-wrap leading-relaxed overflow-auto max-h-[500px]"></div>
                 <p class="text-center text-xs text-gray-500 mt-4">
                    觉得好用？<a href="#" class="underline hover:text-purple-400">请作者喝杯咖啡</a> (后续替换成你的收款码链接)
                </p>
            </div>
        </div>

        <footer class="text-center text-gray-600 text-sm mt-16 space-y-2">
            <p>© 2026 tothinkai.com. All rights reserved.</p>
            <p class="text-xs opacity-50">关键词：AI提示词优化, Prompt Engineer, Midjourney指令, ChatGPT提问技巧, DeepSeek工具</p>
        </footer>

    </main>

    <script>
        // 核心交互逻辑
        async function startEvolve() {
            const inputField = document.getElementById('userInput');
            const submitBtn = document.getElementById('submitBtn');
            const resultArea = document.getElementById('resultArea');
            const outputContent = document.getElementById('outputContent');
            const userText = inputField.value.trim();

            if (!userText) {
                alert("请先输入你的想法！");
                inputField.focus();
                return;
            }

            // 1. 改变按钮状态，防止重复点击
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> AI 正在深度思考中...';
            outputContent.innerText = ""; // 清空上次结果
            resultArea.classList.add('hidden');

            try {
                // 2. 【安全请求】向我们自己的后端保安发起请求
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: userText })
                });

                const data = await response.json();

                if (response.ok) {
                    // 3. 请求成功，显示结果
                    outputContent.innerText = data.choices[0].message.content;
                    resultArea.classList.remove('hidden');
                    // 平滑滚动到结果区
                    resultArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    // 处理后端返回的错误
                    throw new Error(data.error || '请求失败');
                }

            } catch (error) {
                console.error(error);
                alert('抱歉，AI 开小差了，请稍后再试。（错误信息：' + error.message + '）');
            } finally {
                // 4. 恢复按钮状态
                submitBtn.disabled = false;
                submitBtn.innerHTML = '✨ 一键进化提示词';
            }
        }

        // 复制功能
        function copyText() {
            const text = document.getElementById('outputContent').innerText;
            navigator.clipboard.writeText(text).then(() => {
                const copyBtn = document.querySelector('#resultArea button');
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '✅ 已复制成功！';
                copyBtn.classList.add('text-green-500');
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.classList.remove('text-green-500');
                }, 2000);
            }).catch(err => {
                alert('复制失败，请手动复制');
            });
        }
    </script>
</body>
</html>